<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1.0, user-scalable=no"
  />
  <meta name="apple-mobile-web-app-capable" content="no" />
  <meta name="mobile-web-app-capable" content="no" />
  <title>Voxel Builder (Controller Only)</title>

  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.169.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.169.0/examples/jsm/"
      }
    }
  </script>

  <style>
    html, body { margin:0; height:100%; overflow:hidden; background:#000; color:#fff; }
    canvas { display:block; }

    /* Centered reticle */
    #reticle {
      position: fixed;
      left: 50%;
      top: 50%;
      width: 10px; height: 10px;
      margin-left: -5px; margin-top: -5px;
      border-radius: 50%;
      background: #ffffffcc;
      box-shadow: 0 0 6px #fff;
      pointer-events: none;
      z-index: 5;
    }

    /* Error overlay */
    #errorOverlay {
      position: fixed; inset: 0; display: none;
      background: rgba(0,0,0,.92); color:#ff6; z-index:999999;
      font: 13px/1.5 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      white-space: pre-wrap; padding: 12px; overflow:auto;
    }

    /* Hotbar */
    #hotbar {
      position: fixed; left: 50%; bottom: 16px; transform: translateX(-50%);
      display: grid; grid-template-columns: repeat(10, 64px); gap: 8px;
      z-index: 6;
      user-select: none;
    }
    .slot {
      width: 64px; height: 64px; background: #222a; backdrop-filter: blur(4px);
      border: 2px solid #555; border-radius: 8px; display:flex; flex-direction:column;
      align-items:center; justify-content:center; position:relative;
    }
    .slot.selected { border-color: #fff; box-shadow: 0 0 10px #fff7; }
    .thumb {
      width: 42px; height: 42px; border-radius: 4px; margin-top: 3px;
      display:flex; align-items:center; justify-content:center; font-size: 10px;
      color:#000; font-weight:700;
    }
    .label {
      font-size: 10px; margin-top: 2px; text-align:center; width: 100%;
      color:#ddd; line-height: 1.1;
    }

    /* “Assets Drawer” button & panel (optional, future) */
    #assetsBtn {
      position: fixed; right: 16px; top: 16px; z-index: 7;
      background:#222a; color:#fff; padding:8px 12px; border:1px solid #555; border-radius:8px;
    }
  </style>
</head>
<body>
  <div id="reticle"></div>
  <div id="hotbar"></div>
  <button id="assetsBtn" hidden>Assets</button>
  <div id="errorOverlay"></div>

  <script>
    // Error capture
    const overlay = document.getElementById('errorOverlay');
    function showError(msg, src, line, col, err){
      overlay.style.display='block';
      overlay.textContent = '⚠️ JS Error:\n' + msg +
        (src?('\n\nSource: '+src+':'+line+':'+col):'') +
        (err && err.stack?('\n\n'+err.stack):'');
      console.error(msg, err);
    }
    window.addEventListener('error', e => showError(e.message, e.filename, e.lineno, e.colno, e.error));
    window.addEventListener('unhandledrejection', e => showError(e.reason?.message || e.reason, '', '', '', e.reason));
  </script>

  <script type="module" src="./src/main.js"></script>
</body>
</html>