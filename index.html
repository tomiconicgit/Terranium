<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1.0, user-scalable=no"
  />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <title>Terranium — Builder (Controller Only)</title>

  <style>
    :root {
      --ui-bg: rgba(12,14,18,.75);
      --ui-bd: rgba(255,255,255,.1);
      --ui-tx: #e7ecf4;
      --ui-ac: #4aa3ff;
    }
    html, body { margin:0; height:100%; overflow:hidden; background:#000; color:#fff; font:14px/1.4 system-ui,-apple-system,Segoe UI,Roboto; touch-action:none; }

    #overlay { position:fixed; inset:0; background:rgba(0,0,0,.92); color:#ff6; display:none; white-space:pre-wrap; z-index:999999; padding:12px; font:13px/1.5 ui-monospace,monospace; }

    .hud { position:fixed; inset:0; pointer-events:none; }

    #reticle{
      position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);
      width:8px;height:8px;border-radius:50%;
      background:#fff;box-shadow:0 0 12px rgba(255,255,255,.75);
      pointer-events:none;opacity:.9
    }

    .hotbar{
      position:fixed; left:50%; bottom:16px; transform:translateX(-50%);
      display:flex; gap:8px; padding:8px 10px; background:var(--ui-bg); border:1px solid var(--ui-bd);
      border-radius:10px; pointer-events:auto; backdrop-filter: blur(8px);
    }
    .slot{ width:44px; height:44px; border:1px solid var(--ui-bd); border-radius:8px; background:rgba(255,255,255,.05); display:grid; place-items:center; cursor:pointer; }
    .slot.active{ outline:2px solid var(--ui-ac); }
    .swatch{ width:30px; height:30px; border-radius:4px; box-shadow: inset 0 0 0 1px rgba(0,0,0,.25); }

    .btn{
      position:fixed; right:16px; bottom:16px; pointer-events:auto;
      background:var(--ui-bg); color:var(--ui-tx); border:1px solid var(--ui-bd); border-radius:10px;
      padding:10px 14px; cursor:pointer; backdrop-filter: blur(8px);
    }
    .btn2{ right:100px; }

    .modal{
      position:fixed; right:16px; top:16px; width:360px; max-width:90vw;
      background:var(--ui-bg); border:1px solid var(--ui-bd); border-radius:12px; padding:12px;
      display:none; pointer-events:auto; backdrop-filter: blur(8px);
    }
    .modal h3{ margin:6px 2px 10px; font-weight:600; }
    .grid{ display:grid; grid-template-columns:repeat(6, minmax(0,1fr)); gap:8px; }
    .tile{ height:60px; border:1px solid var(--ui-bd); border-radius:8px; display:grid; place-items:center; cursor:pointer; background:rgba(255,255,255,.05); }
    .tile .swatch{ width:42px;height:42px; }
  </style>
</head>
<body>
  <div id="overlay"></div>

  <div class="hud" id="hud">
    <div id="reticle"></div>
    <div class="hotbar" id="hotbar"></div>
    <button class="btn btn2" id="copyBtn">Copy</button>
    <button class="btn" id="blocksBtn">Blocks</button>

    <div class="modal" id="palette">
      <h3>Blocks & Parts</h3>
      <div class="grid" id="paletteGrid"></div>
    </div>
  </div>

  <script>
  const overlay = document.getElementById('overlay');
  function showError(msg, src, line, col, err){
    overlay.style.display='block';
    overlay.textContent = '⚠️ JS Error:\n' + msg +
      (src?('\n\nSource: '+src+':'+line+':'+col):'') +
      (err && err.stack?('\n\n'+err.stack):'');
    console.error(msg, err);
  }
  window.addEventListener('error', e => showError(e.message, e.filename, e.lineno, e.colno, e.error));
  window.addEventListener('unhandledrejection', e => showError(e.reason?.message || e.reason, '', '', '', e.reason));
  </script>

  <script type="module" src="./src/main.js"></script>
</body>
</html>